{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/user/Desktop/tech-store/src/context/context.js\";\nimport React, { Component } from 'react';\nimport { linkData } from './linkData';\nconst ProductContext = /*#__PURE__*/React.createContext();\n\nclass ProductProvider extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      sidebarOpen: false,\n      cartOpen: false,\n      links: linkData,\n      cart: [],\n      cartItems: 0,\n      cartSubTotal: 0,\n      cartTax: 0,\n      carTotal: 0,\n      storeProducts: [],\n      filteredProducts: [],\n      featuredProducts: [],\n      singleProduct: {},\n      loading: true\n    };\n\n    this.setProducts = products => {\n      let storeProducts = products.map(item => {\n        const {\n          id\n        } = item.sys.id;\n        const product = {\n          id,\n          ...item.fields\n        };\n        return product;\n      });\n      let featuredProducts = storeProducts.filter(item => item.featured === true);\n      this.setState({\n        storeProducts,\n        filteredProducts: storeProducts,\n        featuredProducts,\n        singleProduct: this.getSingleProduct(),\n        loading: false\n      });\n    };\n\n    this.handleSidebar = () => {\n      console.log('clicked');\n      this.setState({\n        sidebarOpen: !this.state.sidebarOpen\n      });\n    };\n\n    this.handleCart = () => {\n      this.setState({\n        cartOpen: !this.state.cartOpen\n      });\n    };\n\n    this.closeCart = () => {\n      this.setState({\n        cartOpen: false\n      });\n    };\n\n    this.openCart = () => {\n      this.setState({\n        cartOpen: true\n      });\n    };\n\n    this.setSingleProduct = id => {\n      let product = this.state.storeProducts.find(item => item.id === id);\n      localStorage.setItem('singleProduct', JSON.stringify(product));\n      this.setState({\n        singleProduct: product,\n        loading: false\n      });\n    };\n\n    this.getSingleProduct = () => {\n      return localStorage.getItem('singleProduct') ? JSON.parse(localStorage.getItem('singleProduct')) : {};\n    };\n\n    this.addToCart = id => {\n      let tempCart = [...this.state.cart];\n      let tempProducts = [...this.state.storeProducts];\n      let tempItem = tempCart.find(item => item.id === id);\n\n      if (!tempItem) {\n        tempItem = tempProducts.find(item => item.id === id);\n        let total = tempItem.price;\n        let cartItem = { ...tempItem,\n          count: 1,\n          total\n        };\n        tempCart = [...tempCart, cartItem];\n      } else {\n        tempItem.count++;\n        tempItem.total = tempItem.price * tempItem.count;\n        tempItem.total = parseFloat(tempItem.total.toFixed(2));\n      }\n\n      this.setState(() => {\n        return {\n          cart: tempCart\n        };\n      }, () => {\n        this.addTotals();\n        this.syncStorage();\n        this.openCart();\n      });\n    };\n\n    this.getTotals = () => {\n      let subTotal = 0;\n      let cartItems = 0;\n      this.state.cart.forEach(item => {\n        subTotal += item.total;\n        cartItems += item.count;\n      });\n      subTotal = parseFloat(subtTotal.toFixed(2));\n      let tax = subTotal * 0.22;\n      let total = subTotal + tax;\n      total = parseFloat(total.toFixed(2));\n      return {\n        cartItems,\n        subTotal,\n        tax,\n        total\n      };\n    };\n\n    this.addTotals = () => {};\n\n    this.syncStorage = () => {};\n  }\n\n  async componentDidMount() {\n    const contentful = require('contentful');\n\n    const client = contentful.createClient({\n      space: 'l9qdjfpc8vvd',\n      accessToken: 'kqFK1FtE39BzI6enKVKgczj7b54UCTmHJCxqAIrfDpM'\n    });\n    const response = await client.getEntries({\n      content_type: 'techstore'\n    });\n    this.setProducts(response.items);\n  } // setProducts\n\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(ProductContext.Provider, {\n      value: { ...this.state,\n        handleSidebar: this.handleSidebar,\n        handleCart: this.handleCart,\n        openCart: this.openCart,\n        closeCart: this.closeCart,\n        setSingleProduct: this.setSingleProduct,\n        getSingleProduct: this.getSingleProduct,\n        addToCart: this.addToCart\n      },\n      children: this.props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nconst ProductConsumer = ProductContext.Consumer;\nexport { ProductProvider, ProductConsumer, ProductContext };","map":{"version":3,"sources":["/Users/user/Desktop/tech-store/src/context/context.js"],"names":["React","Component","linkData","ProductContext","createContext","ProductProvider","state","sidebarOpen","cartOpen","links","cart","cartItems","cartSubTotal","cartTax","carTotal","storeProducts","filteredProducts","featuredProducts","singleProduct","loading","setProducts","products","map","item","id","sys","product","fields","filter","featured","setState","getSingleProduct","handleSidebar","console","log","handleCart","closeCart","openCart","setSingleProduct","find","localStorage","setItem","JSON","stringify","getItem","parse","addToCart","tempCart","tempProducts","tempItem","total","price","cartItem","count","parseFloat","toFixed","addTotals","syncStorage","getTotals","subTotal","forEach","subtTotal","tax","componentDidMount","contentful","require","client","createClient","space","accessToken","response","getEntries","content_type","items","render","props","children","ProductConsumer","Consumer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { linkData } from './linkData';\n\nconst ProductContext = React.createContext();\n\nclass ProductProvider extends Component {\n\tstate = {\n\t\tsidebarOpen: false,\n\t\tcartOpen: false,\n\t\tlinks: linkData,\n\t\tcart: [],\n\t\tcartItems: 0,\n\t\tcartSubTotal: 0,\n\t\tcartTax: 0,\n\t\tcarTotal: 0,\n\t\tstoreProducts: [],\n\t\tfilteredProducts: [],\n\t\tfeaturedProducts: [],\n\t\tsingleProduct: {},\n\t\tloading: true,\n\t};\n\tasync componentDidMount() {\n\t\tconst contentful = require('contentful');\n\t\tconst client = contentful.createClient({\n\t\t\tspace: 'l9qdjfpc8vvd',\n\t\t\taccessToken: 'kqFK1FtE39BzI6enKVKgczj7b54UCTmHJCxqAIrfDpM',\n\t\t});\n\t\tconst response = await client.getEntries({\n\t\t\tcontent_type: 'techstore',\n\t\t});\n\t\tthis.setProducts(response.items);\n\t}\n\n\t// setProducts\n\n\tsetProducts = products => {\n\t\tlet storeProducts = products.map(item => {\n\t\t\tconst { id } = item.sys.id;\n\t\t\tconst product = { id, ...item.fields };\n\t\t\treturn product;\n\t\t});\n\t\tlet featuredProducts = storeProducts.filter(item => item.featured === true);\n\t\tthis.setState({\n\t\t\tstoreProducts,\n\t\t\tfilteredProducts: storeProducts,\n\t\t\tfeaturedProducts,\n\t\t\tsingleProduct: this.getSingleProduct(),\n\t\t\tloading: false,\n\t\t});\n\t};\n\t// handle sidebar\n\thandleSidebar = () => {\n\t\tconsole.log('clicked');\n\t\tthis.setState({\n\t\t\tsidebarOpen: !this.state.sidebarOpen,\n\t\t});\n\t};\n\n\t// handle cart\n\thandleCart = () => {\n\t\tthis.setState({ cartOpen: !this.state.cartOpen });\n\t};\n\n\t// close cart\n\tcloseCart = () => {\n\t\tthis.setState({\n\t\t\tcartOpen: false,\n\t\t});\n\t};\n\n\t// open cart\n\topenCart = () => {\n\t\tthis.setState({\n\t\t\tcartOpen: true,\n\t\t});\n\t};\n\t// set Single Product\n\tsetSingleProduct = id => {\n\t\tlet product = this.state.storeProducts.find(item => item.id === id);\n\t\tlocalStorage.setItem('singleProduct', JSON.stringify(product));\n\t\tthis.setState({\n\t\t\tsingleProduct: product,\n\t\t\tloading: false,\n\t\t});\n\t};\n\n\t// get single product\n\tgetSingleProduct = () => {\n\t\treturn localStorage.getItem('singleProduct')\n\t\t\t? JSON.parse(localStorage.getItem('singleProduct'))\n\t\t\t: {};\n\t};\n\n\t// add to cart\n\taddToCart = id => {\n\t\tlet tempCart = [...this.state.cart];\n\t\tlet tempProducts = [...this.state.storeProducts];\n\t\tlet tempItem = tempCart.find(item => item.id === id);\n\n\t\tif (!tempItem) {\n\t\t\ttempItem = tempProducts.find(item => item.id === id);\n\t\t\tlet total = tempItem.price;\n\t\t\tlet cartItem = { ...tempItem, count: 1, total };\n\t\t\ttempCart = [...tempCart, cartItem];\n\t\t} else {\n\t\t\ttempItem.count++;\n\t\t\ttempItem.total = tempItem.price * tempItem.count;\n\t\t\ttempItem.total = parseFloat(tempItem.total.toFixed(2));\n\t\t}\n\t\tthis.setState(\n\t\t\t() => {\n\t\t\t\treturn { cart: tempCart };\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tthis.addTotals();\n\t\t\t\tthis.syncStorage();\n\t\t\t\tthis.openCart();\n\t\t\t}\n\t\t);\n\t};\n\t// get totals\n\tgetTotals = () => {\n\t\tlet subTotal = 0;\n\t\tlet cartItems = 0;\n\t\tthis.state.cart.forEach(item => {\n\t\t\tsubTotal += item.total;\n\t\t\tcartItems += item.count;\n\t\t});\n\n\t\tsubTotal = parseFloat(subtTotal.toFixed(2));\n\t\tlet tax = subTotal * 0.22;\n\t\tlet total = subTotal + tax;\n\t\ttotal = parseFloat(total.toFixed(2));\n\t\treturn {\n\t\t\tcartItems,\n\t\t\tsubTotal,\n\t\t\ttax,\n\t\t\ttotal,\n\t\t};\n\t};\n\taddTotals = () => {};\n\tsyncStorage = () => {};\n\trender() {\n\t\treturn (\n\t\t\t<ProductContext.Provider\n\t\t\t\tvalue={{\n\t\t\t\t\t...this.state,\n\t\t\t\t\thandleSidebar: this.handleSidebar,\n\t\t\t\t\thandleCart: this.handleCart,\n\t\t\t\t\topenCart: this.openCart,\n\t\t\t\t\tcloseCart: this.closeCart,\n\t\t\t\t\tsetSingleProduct: this.setSingleProduct,\n\t\t\t\t\tgetSingleProduct: this.getSingleProduct,\n\t\t\t\t\taddToCart: this.addToCart,\n\t\t\t\t}}>\n\t\t\t\t{this.props.children}\n\t\t\t</ProductContext.Provider>\n\t\t);\n\t}\n}\n\nconst ProductConsumer = ProductContext.Consumer;\n\nexport { ProductProvider, ProductConsumer, ProductContext };\n"]},"metadata":{},"sourceType":"module"}