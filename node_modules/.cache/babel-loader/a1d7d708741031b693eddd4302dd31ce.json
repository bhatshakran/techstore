{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/user/Desktop/tech-store/src/context/context.js\";\nimport React, { Component } from 'react';\nimport { linkData } from './linkData';\nconst ProductContext = /*#__PURE__*/React.createContext();\n\nclass ProductProvider extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      sidebarOpen: false,\n      cartOpen: false,\n      links: linkData,\n      cart: [],\n      cartItems: 0,\n      cartSubtotal: 0,\n      cartTax: 0,\n      carTotal: 0,\n      storeProducts: [],\n      filteredProducts: [],\n      featuredProducts: [],\n      singleProduct: {},\n      loading: true,\n      min: 0,\n      max: 0,\n      price: 0,\n      shipping: false,\n      company: 'all'\n    };\n\n    this.setProducts = products => {\n      let storeProducts = products.map(item => {\n        const {\n          id\n        } = item.sys.id;\n        const product = {\n          id,\n          ...item.fields\n        };\n        return product;\n      });\n      let featuredProducts = storeProducts.filter(item => item.featured === true);\n      this.setState({\n        storeProducts,\n        filteredProducts: storeProducts,\n        featuredProducts,\n        cart: this.getStorageCart(),\n        singleProduct: this.getSingleProduct(),\n        loading: false\n      }, () => {\n        this.addTotals();\n      });\n    };\n\n    this.getStorageCart = () => {\n      let cart;\n      localStorage.getItem('cart') ? cart = JSON.parse(localStorage.getItem('cart')) : cart = [];\n      return cart;\n    };\n\n    this.handleSidebar = () => {\n      console.log('clicked');\n      this.setState({\n        sidebarOpen: !this.state.sidebarOpen\n      });\n    };\n\n    this.handleCart = () => {\n      this.setState({\n        cartOpen: !this.state.cartOpen\n      });\n    };\n\n    this.closeCart = () => {\n      this.setState({\n        cartOpen: false\n      });\n    };\n\n    this.openCart = () => {\n      this.setState({\n        cartOpen: true\n      });\n    };\n\n    this.setSingleProduct = id => {\n      let product = this.state.storeProducts.find(item => item.id === id);\n      localStorage.setItem('singleProduct', JSON.stringify(product));\n      this.setState({\n        singleProduct: product,\n        loading: false\n      });\n    };\n\n    this.getSingleProduct = () => {\n      return localStorage.getItem('singleProduct') ? JSON.parse(localStorage.getItem('singleProduct')) : {};\n    };\n\n    this.addToCart = id => {\n      let tempCart = [...this.state.cart];\n      let tempProducts = [...this.state.storeProducts];\n      let tempItem = tempCart.find(item => item.id === id);\n\n      if (!tempItem) {\n        tempItem = tempProducts.find(item => item.id === id);\n        let total = tempItem.price;\n        let cartItem = { ...tempItem,\n          count: 1,\n          total\n        };\n        tempCart = [...tempCart, cartItem];\n      } else {\n        tempItem.count++;\n        tempItem.total = tempItem.price * tempItem.count;\n        tempItem.total = parseFloat(tempItem.total.toFixed(2));\n      }\n\n      this.setState(() => {\n        return {\n          cart: tempCart\n        };\n      }, () => {\n        this.addTotals();\n        this.syncStorage();\n        this.openCart();\n      });\n    };\n\n    this.getTotals = () => {\n      let subTotal = 0;\n      let cartItems = 0;\n      this.state.cart.forEach(item => {\n        subTotal += item.total;\n        cartItems += item.count;\n      });\n      subTotal = parseFloat(subTotal.toFixed(2));\n      let tax = subTotal * 0.22;\n      let total = subTotal + tax;\n      total = parseFloat(total.toFixed(2));\n      return {\n        cartItems,\n        subTotal,\n        tax,\n        total\n      };\n    };\n\n    this.addTotals = () => {\n      const totals = this.getTotals();\n      this.setState({\n        cartItems: totals.cartItems,\n        cartSubtotal: totals.subTotal,\n        cartTax: totals.tax,\n        cartTotal: totals.total\n      });\n    };\n\n    this.syncStorage = () => {\n      localStorage.setItem('cart', JSON.stringify(this.state.cart));\n    };\n\n    this.increment = id => {\n      let tempCart = [...this.state.cart];\n      const cartItem = tempCart.find(item => item.id === id);\n      cartItem.count++;\n      cartItem.total = cartItem.count * cartItem.price;\n      cartItem.total = parseFloat(cartItem.total.toFixed(2));\n      this.setState(() => {\n        return {\n          cart: [...tempCart]\n        };\n      }, () => {\n        this.addTotals();\n        this.syncStorage();\n      });\n    };\n\n    this.decrement = id => {\n      let tempCart = [...this.state.cart];\n      const cartItem = tempCart.find(item => item.id === id);\n      cartItem.count = cartItem.count - 1;\n\n      if (cartItem.count === 0) {\n        this.removeItem(id);\n      } else {\n        cartItem.total = cartItem.count * cartItem.price;\n        cartItem.total = parseFloat(cartItem.total.toFixed(2));\n        this.setState({\n          cart: [...tempCart]\n        }, () => {\n          this.addTotals();\n          this.syncStorage();\n        });\n      }\n    };\n\n    this.removeItem = id => {\n      let tempCart = [...this.state.cart];\n      tempCart = tempCart.filter(item => item.id !== id);\n      this.setState({\n        cart: [...tempCart]\n      }, () => {\n        this.addTotals();\n        this.syncStorage();\n      });\n    };\n\n    this.clearCart = () => {\n      let tempCart = [];\n      this.setState({\n        cart: [...tempCart]\n      }, () => {\n        this.addTotals();\n        this.syncStorage();\n      });\n    };\n\n    this.handleChange = event => {\n      console.log(event);\n    };\n  }\n\n  async componentDidMount() {\n    const contentful = require('contentful');\n\n    const client = contentful.createClient({\n      space: 'l9qdjfpc8vvd',\n      accessToken: 'kqFK1FtE39BzI6enKVKgczj7b54UCTmHJCxqAIrfDpM'\n    });\n    const response = await client.getEntries({\n      content_type: 'techstore'\n    });\n    this.setProducts(response.items);\n  } // setProducts\n\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(ProductContext.Provider, {\n      value: { ...this.state,\n        handleSidebar: this.handleSidebar,\n        handleCart: this.handleCart,\n        openCart: this.openCart,\n        closeCart: this.closeCart,\n        setSingleProduct: this.setSingleProduct,\n        getSingleProduct: this.getSingleProduct,\n        addToCart: this.addToCart,\n        increment: this.increment,\n        decrement: this.decrement,\n        removeItem: this.removeItem,\n        clearCart: this.clearCart,\n        handleChange: this.handleChange\n      },\n      children: this.props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nconst ProductConsumer = ProductContext.Consumer;\nexport { ProductProvider, ProductConsumer, ProductContext };","map":{"version":3,"sources":["/Users/user/Desktop/tech-store/src/context/context.js"],"names":["React","Component","linkData","ProductContext","createContext","ProductProvider","state","sidebarOpen","cartOpen","links","cart","cartItems","cartSubtotal","cartTax","carTotal","storeProducts","filteredProducts","featuredProducts","singleProduct","loading","min","max","price","shipping","company","setProducts","products","map","item","id","sys","product","fields","filter","featured","setState","getStorageCart","getSingleProduct","addTotals","localStorage","getItem","JSON","parse","handleSidebar","console","log","handleCart","closeCart","openCart","setSingleProduct","find","setItem","stringify","addToCart","tempCart","tempProducts","tempItem","total","cartItem","count","parseFloat","toFixed","syncStorage","getTotals","subTotal","forEach","tax","totals","cartTotal","increment","decrement","removeItem","clearCart","handleChange","event","componentDidMount","contentful","require","client","createClient","space","accessToken","response","getEntries","content_type","items","render","props","children","ProductConsumer","Consumer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { linkData } from './linkData';\n\nconst ProductContext = React.createContext();\n\nclass ProductProvider extends Component {\n\tstate = {\n\t\tsidebarOpen: false,\n\t\tcartOpen: false,\n\t\tlinks: linkData,\n\t\tcart: [],\n\t\tcartItems: 0,\n\t\tcartSubtotal: 0,\n\t\tcartTax: 0,\n\t\tcarTotal: 0,\n\t\tstoreProducts: [],\n\t\tfilteredProducts: [],\n\t\tfeaturedProducts: [],\n\t\tsingleProduct: {},\n\t\tloading: true,\n\t\tmin: 0,\n\t\tmax: 0,\n\t\tprice: 0,\n\t\tshipping: false,\n\t\tcompany: 'all',\n\t};\n\tasync componentDidMount() {\n\t\tconst contentful = require('contentful');\n\t\tconst client = contentful.createClient({\n\t\t\tspace: 'l9qdjfpc8vvd',\n\t\t\taccessToken: 'kqFK1FtE39BzI6enKVKgczj7b54UCTmHJCxqAIrfDpM',\n\t\t});\n\t\tconst response = await client.getEntries({\n\t\t\tcontent_type: 'techstore',\n\t\t});\n\t\tthis.setProducts(response.items);\n\t}\n\n\t// setProducts\n\n\tsetProducts = products => {\n\t\tlet storeProducts = products.map(item => {\n\t\t\tconst { id } = item.sys.id;\n\t\t\tconst product = { id, ...item.fields };\n\t\t\treturn product;\n\t\t});\n\t\tlet featuredProducts = storeProducts.filter(item => item.featured === true);\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tstoreProducts,\n\t\t\t\tfilteredProducts: storeProducts,\n\t\t\t\tfeaturedProducts,\n\t\t\t\tcart: this.getStorageCart(),\n\t\t\t\tsingleProduct: this.getSingleProduct(),\n\t\t\t\tloading: false,\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tthis.addTotals();\n\t\t\t}\n\t\t);\n\t};\n\t// get cart from local storage\n\tgetStorageCart = () => {\n\t\tlet cart;\n\t\tlocalStorage.getItem('cart')\n\t\t\t? (cart = JSON.parse(localStorage.getItem('cart')))\n\t\t\t: (cart = []);\n\t\treturn cart;\n\t};\n\t// handle sidebar\n\thandleSidebar = () => {\n\t\tconsole.log('clicked');\n\t\tthis.setState({\n\t\t\tsidebarOpen: !this.state.sidebarOpen,\n\t\t});\n\t};\n\n\t// handle cart\n\thandleCart = () => {\n\t\tthis.setState({ cartOpen: !this.state.cartOpen });\n\t};\n\n\t// close cart\n\tcloseCart = () => {\n\t\tthis.setState({\n\t\t\tcartOpen: false,\n\t\t});\n\t};\n\n\t// open cart\n\topenCart = () => {\n\t\tthis.setState({\n\t\t\tcartOpen: true,\n\t\t});\n\t};\n\t// set Single Product\n\tsetSingleProduct = id => {\n\t\tlet product = this.state.storeProducts.find(item => item.id === id);\n\t\tlocalStorage.setItem('singleProduct', JSON.stringify(product));\n\t\tthis.setState({\n\t\t\tsingleProduct: product,\n\t\t\tloading: false,\n\t\t});\n\t};\n\n\t// get single product\n\tgetSingleProduct = () => {\n\t\treturn localStorage.getItem('singleProduct')\n\t\t\t? JSON.parse(localStorage.getItem('singleProduct'))\n\t\t\t: {};\n\t};\n\n\t// add to cart\n\taddToCart = id => {\n\t\tlet tempCart = [...this.state.cart];\n\t\tlet tempProducts = [...this.state.storeProducts];\n\t\tlet tempItem = tempCart.find(item => item.id === id);\n\n\t\tif (!tempItem) {\n\t\t\ttempItem = tempProducts.find(item => item.id === id);\n\t\t\tlet total = tempItem.price;\n\t\t\tlet cartItem = { ...tempItem, count: 1, total };\n\t\t\ttempCart = [...tempCart, cartItem];\n\t\t} else {\n\t\t\ttempItem.count++;\n\t\t\ttempItem.total = tempItem.price * tempItem.count;\n\t\t\ttempItem.total = parseFloat(tempItem.total.toFixed(2));\n\t\t}\n\t\tthis.setState(\n\t\t\t() => {\n\t\t\t\treturn { cart: tempCart };\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tthis.addTotals();\n\t\t\t\tthis.syncStorage();\n\t\t\t\tthis.openCart();\n\t\t\t}\n\t\t);\n\t};\n\t// get totals\n\tgetTotals = () => {\n\t\tlet subTotal = 0;\n\t\tlet cartItems = 0;\n\t\tthis.state.cart.forEach(item => {\n\t\t\tsubTotal += item.total;\n\t\t\tcartItems += item.count;\n\t\t});\n\n\t\tsubTotal = parseFloat(subTotal.toFixed(2));\n\t\tlet tax = subTotal * 0.22;\n\t\tlet total = subTotal + tax;\n\t\ttotal = parseFloat(total.toFixed(2));\n\t\treturn {\n\t\t\tcartItems,\n\t\t\tsubTotal,\n\t\t\ttax,\n\t\t\ttotal,\n\t\t};\n\t};\n\t//add totals\n\taddTotals = () => {\n\t\tconst totals = this.getTotals();\n\t\tthis.setState({\n\t\t\tcartItems: totals.cartItems,\n\t\t\tcartSubtotal: totals.subTotal,\n\t\t\tcartTax: totals.tax,\n\t\t\tcartTotal: totals.total,\n\t\t});\n\t};\n\t// sync storage\n\tsyncStorage = () => {\n\t\tlocalStorage.setItem('cart', JSON.stringify(this.state.cart));\n\t};\n\t// increment\n\tincrement = id => {\n\t\tlet tempCart = [...this.state.cart];\n\t\tconst cartItem = tempCart.find(item => item.id === id);\n\t\tcartItem.count++;\n\t\tcartItem.total = cartItem.count * cartItem.price;\n\t\tcartItem.total = parseFloat(cartItem.total.toFixed(2));\n\t\tthis.setState(\n\t\t\t() => {\n\t\t\t\treturn {\n\t\t\t\t\tcart: [...tempCart],\n\t\t\t\t};\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tthis.addTotals();\n\t\t\t\tthis.syncStorage();\n\t\t\t}\n\t\t);\n\t};\n\t// decrement\n\tdecrement = id => {\n\t\tlet tempCart = [...this.state.cart];\n\t\tconst cartItem = tempCart.find(item => item.id === id);\n\t\tcartItem.count = cartItem.count - 1;\n\t\tif (cartItem.count === 0) {\n\t\t\tthis.removeItem(id);\n\t\t} else {\n\t\t\tcartItem.total = cartItem.count * cartItem.price;\n\t\t\tcartItem.total = parseFloat(cartItem.total.toFixed(2));\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tcart: [...tempCart],\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tthis.addTotals();\n\t\t\t\t\tthis.syncStorage();\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t};\n\t// remove item\n\tremoveItem = id => {\n\t\tlet tempCart = [...this.state.cart];\n\t\ttempCart = tempCart.filter(item => item.id !== id);\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tcart: [...tempCart],\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tthis.addTotals();\n\t\t\t\tthis.syncStorage();\n\t\t\t}\n\t\t);\n\t};\n\t// clear cart\n\tclearCart = () => {\n\t\tlet tempCart = [];\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tcart: [...tempCart],\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tthis.addTotals();\n\t\t\t\tthis.syncStorage();\n\t\t\t}\n\t\t);\n\t};\n\t// handle change\n\thandleChange = event => {\n\t\tconsole.log(event);\n\t};\n\trender() {\n\t\treturn (\n\t\t\t<ProductContext.Provider\n\t\t\t\tvalue={{\n\t\t\t\t\t...this.state,\n\t\t\t\t\thandleSidebar: this.handleSidebar,\n\t\t\t\t\thandleCart: this.handleCart,\n\t\t\t\t\topenCart: this.openCart,\n\t\t\t\t\tcloseCart: this.closeCart,\n\t\t\t\t\tsetSingleProduct: this.setSingleProduct,\n\t\t\t\t\tgetSingleProduct: this.getSingleProduct,\n\t\t\t\t\taddToCart: this.addToCart,\n\t\t\t\t\tincrement: this.increment,\n\t\t\t\t\tdecrement: this.decrement,\n\t\t\t\t\tremoveItem: this.removeItem,\n\t\t\t\t\tclearCart: this.clearCart,\n\t\t\t\t\thandleChange: this.handleChange,\n\t\t\t\t}}>\n\t\t\t\t{this.props.children}\n\t\t\t</ProductContext.Provider>\n\t\t);\n\t}\n}\n\nconst ProductConsumer = ProductContext.Consumer;\n\nexport { ProductProvider, ProductConsumer, ProductContext };\n"]},"metadata":{},"sourceType":"module"}